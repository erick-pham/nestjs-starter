{"version":3,"file":"widget-analytics-latest.min.js","mappings":"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","sources":["webpack://EPAnalytics/webpack/universalModuleDefinition","webpack://EPAnalytics/webpack/bootstrap","webpack://EPAnalytics/webpack/runtime/define property getters","webpack://EPAnalytics/webpack/runtime/hasOwnProperty shorthand","webpack://EPAnalytics/webpack/runtime/make namespace object","webpack://EPAnalytics/./widget/analytics/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"EPAnalytics\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"EPAnalytics\"] = factory();\n\telse\n\t\troot[\"EPAnalytics\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","let configs = null;\r\n\r\nfunction setCookie(cname, cvalue, exdays) {\r\n  const d = new Date();\r\n  d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\r\n  let expires = 'expires=' + d.toUTCString();\r\n  document.cookie = cname + '=' + cvalue + ';' + expires + ';path=/';\r\n}\r\n\r\nfunction getCookie(cname) {\r\n  let name = cname + '=';\r\n  let ca = document.cookie.split(';');\r\n  for (let i = 0; i < ca.length; i++) {\r\n    let c = ca[i];\r\n    while (c.charAt(0) == ' ') {\r\n      c = c.substring(1);\r\n    }\r\n    if (c.indexOf(name) == 0) {\r\n      return c.substring(name.length, c.length);\r\n    }\r\n  }\r\n  return '';\r\n}\r\n\r\nfunction callApi({\r\n  type,\r\n  currentOrigin,\r\n  currentPath,\r\n  currentTitle,\r\n  eventCategory = '',\r\n  eventAction = '',\r\n  eventLabel = ''\r\n}) {\r\n  if (configs === null) {\r\n    return;\r\n  }\r\n\r\n  let url = 'https://pewter-chalk-minotaurasaurus.glitch.me/collect';\r\n  let options = {};\r\n\r\n  if (configs.options) {\r\n    options = configs.options;\r\n  }\r\n\r\n  if (configs.options && configs.options.url) {\r\n    url = configs.options.url;\r\n  }\r\n\r\n  if (!configs.id || !url) {\r\n    throw new Error('Missing ID or Configs');\r\n  }\r\n\r\n  const params = {\r\n    cid: configs.id,\r\n    uid: configs.uid,\r\n    t: type,\r\n    sr: `${window.screen.width}x${window.screen.height}`,\r\n    dl: currentOrigin,\r\n    dp: currentPath,\r\n    dt: currentTitle,\r\n    ec: eventCategory,\r\n    ea: eventAction,\r\n    el: eventLabel\r\n  };\r\n\r\n  const qs = '?' + new URLSearchParams(params).toString();\r\n\r\n  fetch(`${url}${qs}`, options);\r\n}\r\n\r\n// Function to get the current path\r\nfunction getCurrentOrigin() {\r\n  return window.location.origin;\r\n}\r\n\r\n// Function to get the current path\r\nfunction getCurrentPath() {\r\n  return window.location.pathname;\r\n}\r\n\r\n// Function to get the current href\r\nfunction getCurrentTitle() {\r\n  return document.title;\r\n}\r\n\r\n// Function to handle page navigation\r\nfunction handleNavigation() {\r\n  var currentOrigin = getCurrentOrigin();\r\n  var currentPath = getCurrentPath();\r\n  var currentTitle = getCurrentTitle();\r\n  callApi({\r\n    type: 'pageview',\r\n    currentOrigin,\r\n    currentPath,\r\n    currentTitle\r\n  });\r\n}\r\n\r\nexport function init(id, options = {}) {\r\n  configs = {\r\n    id: id,\r\n    options: options\r\n  };\r\n\r\n  var session = getCookie('_ea');\r\n  if (session) {\r\n    configs.uid = session;\r\n  } else {\r\n    var seconds = Math.floor(new Date().getTime() / 1000);\r\n    var session_id = Math.random().toString(16).slice(2);\r\n    configs.uid = `EA.${session_id}.${seconds}`;\r\n    setCookie('_ea', configs.uid, 365);\r\n  }\r\n}\r\n\r\nexport function event({ category, action, label }) {\r\n  var currentOrigin = getCurrentOrigin();\r\n  var currentPath = getCurrentPath();\r\n  var currentTitle = getCurrentTitle();\r\n  callApi({\r\n    type: 'event',\r\n    currentOrigin,\r\n    currentPath,\r\n    currentTitle,\r\n    eventCategory: category,\r\n    eventAction: action,\r\n    eventLabel: label\r\n  });\r\n}\r\n\r\n// Trigger pageview manually\r\nexport function pageview({ path, title }) {\r\n  var currentOrigin = getCurrentOrigin();\r\n  callApi({\r\n    type: 'pageview',\r\n    currentOrigin,\r\n    currentPath: path,\r\n    currentTitle: title\r\n  });\r\n}\r\n\r\n// Attach the event listener for page navigation\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n  handleNavigation();\r\n\r\n  // Listen for click events on links\r\n  document.addEventListener('click', function (event) {\r\n    var target = event.target;\r\n\r\n    // Check if the clicked element is a link\r\n    if (target.tagName === 'A' && target.getAttribute('href')) {\r\n      // console.log(\"target\", target);\r\n      // Prevent the default navigation behavior\r\n      // event.preventDefault();\r\n\r\n      // Get the target href\r\n      // var href = target.href;\r\n\r\n      // Perform the navigation\r\n      // window.location.href = href;\r\n\r\n      // Handle the navigation after a short delay\r\n      setTimeout(handleNavigation, 100);\r\n    }\r\n  });\r\n});\r\n"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","configs","callApi","type","currentOrigin","currentPath","currentTitle","eventCategory","eventAction","eventLabel","url","options","id","Error","params","cid","uid","t","sr","window","screen","width","height","dl","dp","dt","ec","ea","el","qs","URLSearchParams","toString","fetch","getCurrentOrigin","location","origin","getCurrentPath","pathname","getCurrentTitle","document","title","handleNavigation","init","session","cname","name","ca","cookie","split","i","length","c","charAt","substring","indexOf","getCookie","seconds","Math","floor","Date","getTime","session_id","random","slice","cvalue","exdays","d","setTime","expires","toUTCString","setCookie","event","category","action","label","pageview","path","addEventListener","target","tagName","getAttribute","setTimeout"],"sourceRoot":""}